language: python
python:
  - "2.6"
  - "2.7"

before_install:
  - deactivate
  - virtualenv --system-site-packages --distribute --python=python$TRAVIS_PYTHON_VERSION ~/virtualenv/python$TRAVIS_PYTHON_VERSION
  - python -c "import pprint, sys; pprint.pprint(sys.path)"
  - sudo apt-get install libcairo2 libxcb1 python-cairo python-gtk2 python-xcbgen python-xlib xserver-xephyr
  - sudo apt-get install python-pip
  - sudo pip install -e git+git://github.com/tych0/xpyb-ng.git#egg=xpyb-ng
  - source ~/virtualenv/python$TRAVIS_PYTHON_VERSION/bin/activate

install:
  - python setup.py -q install

before_script:
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start
  - sleep 3 # give xvfb some time to start

script: cd test; nosetests